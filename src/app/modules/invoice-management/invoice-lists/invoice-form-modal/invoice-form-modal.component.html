<h2 mat-dialog-title style="margin: 0;">
    {{data? 'Update': 'Create'}} Invoice
    <button [mat-dialog-close]="true" class="close mt-1 text-white" data-dismiss="modal" type="button">
        <span aria-hidden="true">×</span>
    </button>
</h2>
<form [formGroup]="invoiceForm" (ngSubmit)="onSubmitForm()">
    <mat-dialog-content class="mat-typography">
        <!-- <div class="row">

            <div class="col-md-6">
                <nz-form-label nzFor="name" nzRequired>Name</nz-form-label>
                <nz-form-item>
                    <nz-form-control nzHasFeedback [nzErrorTip]="nameErrorTemplate">
                        <input nz-input type="text" formControlName="name" id="name" placeholder="Name">
                        <ng-template #nameErrorTemplate let-control>
                            <ng-container *ngIf="control.hasError('required')">Name is required.</ng-container>
                            <ng-container *ngIf="control.hasError('minlength')">Name must be at least 6
                                characters.</ng-container>
                            <ng-container *ngIf="control.hasError('maxlength')">Name must be at most 30
                                characters.</ng-container>
                        </ng-template>
                    </nz-form-control>
                </nz-form-item>
            </div>
            <div class="col-md-6">
                <nz-form-label nzRequired nzFor="email">Email</nz-form-label>
                <nz-form-item>
                    <nz-form-control nzHasFeedback [nzErrorTip]="emailErrorTemplate">
                        <input nz-input type="email" formControlName="email" id="email" placeholder="Enter email" />
                        <ng-template #emailErrorTemplate let-control>
                            <ng-container *ngIf="control.hasError('email')">The input is not valid
                                E-mail!</ng-container>
                            <ng-container *ngIf="control.hasError('required')">Please input your E-mail!</ng-container>
                        </ng-template>
                    </nz-form-control>
                </nz-form-item>
            </div>

            <div class="col-md-6">
                <nz-form-label nzRequired nzFor="phone">Phone</nz-form-label>
                <nz-form-item>
                    <nz-form-control nzHasFeedback [nzErrorTip]="phoneErrorTemplate">
                        <input nz-input type="text" formControlName="phone" id="phone" placeholder="Enter phone" />
                        <ng-template #phoneErrorTemplate let-control>
                            <ng-container *ngIf="control.hasError('minlength')">Phone must be 11 digits
                                long!</ng-container>
                            <ng-container *ngIf="control.hasError('maxlength')">Phone must be at most 11 digits
                                long!</ng-container>
                            <ng-container *ngIf="control.hasError('required')">Phone is required!</ng-container>
                            <ng-container *ngIf="control.hasError('pattern')">Invalid phone numbers!</ng-container>
                        </ng-template>
                    </nz-form-control>

                </nz-form-item>
            </div>

            <div class="col-md-6">
                <nz-form-item>
                    <nz-form-control nzErrorTip="Doctor is required!">
                        <nz-form-label nzRequired nzFor="dentist_id">Doctor</nz-form-label>
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a doctor" name="dentist_id"
                            formControlName="dentist_id">
                            <nz-option *ngFor="let dentist of dentists" [nzValue]="dentist.id" [nzLabel]="dentist.name"></nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>

            <div class="col-md-12">
                <nz-form-item>
                    <nz-form-control nzErrorTip="Department is required!">
                        <nz-form-label nzFor="department_id" nzRequired>Department</nz-form-label>
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a department" id="department_id"
                            formControlName="department_id">
                         
                            <nz-option [nzValue]="1" nzLabel="Dental Department"></nz-option>
                            <nz-option [nzValue]="2" nzLabel="Surgery Department"></nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>

            <div class="col-md-6">
                <nz-form-item>
                    <nz-form-control [nzErrorTip]="dateErrorTemplate">
                        <nz-form-label nzFor="date" nzRequired>Date</nz-form-label>
                        <nz-date-picker id="date" formControlName="date" style="width: 100%"></nz-date-picker>
                        <ng-template #dateErrorTemplate let-control>
                            <ng-container *ngIf="control.hasError('required')">Phone is required!</ng-container>
                            <ng-container *ngIf="control.hasError('invalidBookingDate')">Booking date can't be
                                past.</ng-container>
                            <ng-container *ngIf="control.hasError('exceedBookingDate')">Booking can't exceed next 10
                                days.</ng-container>
                            <ng-container *ngIf="control.hasError('disabledDate')">Off day selected.</ng-container>
                        </ng-template>

                    </nz-form-control>
                </nz-form-item>
            </div>
            <div class="col-md-6">
                <nz-form-item>
                    <nz-form-control nzErrorTip="Time is required!">
                        <nz-form-label nzFor="time" nzRequired>Time</nz-form-label>
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a time" name="time"
                            formControlName="time">
                            <nz-option [nzValue]="0" nzLabel="Select Time"></nz-option>
                            <nz-option [nzValue]="1" nzLabel="9:00 AM - 10:00 AM"></nz-option>
                            <nz-option [nzValue]="2" nzLabel="10:00 AM - 11:00 AM"></nz-option>
                            <nz-option [nzValue]="3" nzLabel="11:00 AM - 12:00 PM"></nz-option>
                            <nz-option [nzValue]="4" nzLabel="12:00 PM - 01:00 PM"></nz-option>
                            <nz-option [nzValue]="5" nzLabel="01:00 PM - 02:00 PM"></nz-option>
                            <nz-option [nzValue]="6" nzLabel="03:00 PM - 04:00 PM"></nz-option>
                            <nz-option [nzValue]="7" nzLabel="04:00 PM - 05:00 PM"></nz-option>
                            <nz-option [nzValue]="8" nzLabel="05:00 PM - 06:00 PM"></nz-option>
                            <nz-option [nzValue]="9" nzLabel="07:00 PM - 08:00 PM"></nz-option>
                            <nz-option [nzValue]="10" nzLabel="08:00 PM - 09:00 PM"></nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>
            <div class="col-md-12" *ngIf="data">
                <nz-form-item>
                    <nz-form-control>
                        <nz-form-label nzFor="status">Status</nz-form-label>
                        <nz-select nzShowSearch nzAllowClear formControlName="status" nzPlaceHolder="Select a status"
                            name="status">
                            <nz-option [nzLabel]="'Scheduled'" [nzValue]="0">Scheduled</nz-option>
                            <nz-option [nzLabel]="'Confirmed'" [nzValue]="1">Confirmed</nz-option>
                            <nz-option [nzLabel]="'Pending Confirmation'" [nzValue]="2">Pending Confirmation</nz-option>
                            <nz-option [nzLabel]="'Cancelled by Patient'" [nzValue]="3">Cancelled by Patient</nz-option>
                            <nz-option [nzLabel]="'Cancelled by Doctor'" [nzValue]="4">Cancelled by Doctor</nz-option>
                            <nz-option [nzLabel]="'Rescheduled'" [nzValue]="5">Rescheduled</nz-option>
                            <nz-option [nzLabel]="'Completed'" [nzValue]="6">Completed</nz-option>
                            <nz-option [nzLabel]="'In Progress'" [nzValue]="7">In Progress</nz-option>
                            <nz-option [nzLabel]="'Emergency'" [nzValue]="8">Emergency</nz-option>
                            <nz-option [nzLabel]="'Awaiting Treatment'" [nzValue]="9">Awaiting Treatment</nz-option>
                            <nz-option [nzLabel]="'Follow-Up Required'" [nzValue]="10">Follow-Up Required</nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>

            <div class="col-md-12">
                <nz-form-item>
                    <nz-form-control>
                        <nz-form-label nzFor="remarks">Remarks</nz-form-label>
                        <textarea nz-input type="text" name="remarks" placeholder="Write the remarks"
                            formControlName="remarks" id="remarks">
                        </textarea>
                    </nz-form-control>
                </nz-form-item>
            </div>

            <div class="col-md-6">
                <nz-form-item>
                    <nz-form-control>
                        <nz-form-label nzFor="status">Feature</nz-form-label>
                        <nz-switch class="ms-2" nzCheckedChildren="Yes" nzUnCheckedChildren="No"
                            formControlName="feature" name="feature" id="feature">
                        </nz-switch>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div> -->

        <div class="invoice-wrap">
            <div class="invoice-inner">
                <table border="0" cellpadding="0" cellspacing="0" width="100%">
                    <tbody>
                        <tr>
                            <td align="right" valign="top">
                                <div class="company-info">
                                    <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <img id="logo" src="assets/img/logo.jpeg">
                                                    <p class="d-flex mt-2 mb-0">
                                                        <span nz-icon nzType="phone" nzTheme="outline"></span>
                                                        <small class="ms-2">
                                                            <a href="tel:09613445544"> 09613445544</a>
                                                        </small>
                                                    </p>
                                                    <p class="d-flex mb-0">
                                                        <span nz-icon nzType="mobile" nzTheme="outline"></span>
                                                        <small class="ms-2">
                                                            <a href="tel:+8802410327017"> +8802-41032-7017</a>
                                                        </small>
                                                    </p>
                                                    <p class="d-flex mb-0">
                                                        <span nz-icon nzType="global" nzTheme="outline"></span>
                                                        <small class="ms-2">
                                                            <a href="http://www.ibhospital.com/"> www.ibhospital.com</a>
                                                        </small>
                                                    </p>
                                                    <p class="d-flex mb-0">
                                                        <span nz-icon nzType="mail" nzTheme="outline"></span>
                                                        <small class="ms-2">
                                                            <a href="mailto:info@insafbarakahospital.com">
                                                                info@insafbarakahospital.com</a>
                                                        </small>
                                                    </p>

                                                    <p class="d-flex mb-0">
                                                        <span nz-icon nzType="home" nzTheme="outline"></span>
                                                        <small class="ms-2">11 Shahid Tazuddin Ahmed Shoroni,
                                                            <br />
                                                            Mogbazar, Dhaka-1217
                                                        </small>
                                                    </p>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </td>
                            <td align="right" valign="top">
                                <strong>Dental, Oral and Maxillofacial Surgeon</strong><br>
                                <h2 class="m-0">Dr. Asraf Ali Bissash Reyad</h2>
                                <small class="info mb-2">
                                    BDS (Dhaka) MDS (China)<br>
                                    Advanced Training in dental implant (Malaysia)<br>
                                    Associate Fellow in Laser dentistry (India)<br>
                                    <span class="text-success">Assistant Professor Oral and Maxillofacial Surgery<br>
                                        Chief Consultant, Dental Unit
                                    </span><br>
                                    BMDC: 5483
                                </small>
                                <div class="contact">
                                    Mobile: 01726-187603 <br>
                                    Serial: 09613-445544 (8 am-8 pm)
                                </div>

                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="invoice-address">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%">
                        <tbody>
                            <tr>
                                <td align="left" valign="top" width="50%">
                                    <table border="0" cellpadding="0" cellspacing="0">
                                        <tbody>
                                            <tr>
                                                <td valign="top"><strong>Bill To</strong></td>
                                                <td valign="top">
                                                    <div class="client_info">
                                                        <table border="0" cellpadding="0" cellspacing="0">
                                                            <tbody>
                                                                <tr>
                                                                    <td style="padding-left:25px;">
                                                                        <input nz-input id="name" formControlName="name"
                                                                            placeholder="[Patient Name]"><br>
                                                                        <input nz-input id="phone"
                                                                            formControlName="phone"
                                                                            placeholder="[Phone]"><br>
                                                                        <input nz-input id="address"
                                                                            formControlName="address"
                                                                            placeholder="[Address]"><br>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                                <td align="right" valign="top" width="50%">
                                    <table border="0" cellpadding="0" cellspacing="0">
                                        <tbody>
                                            <tr>
                                                <td align="right">
                                                    <strong>
                                                        <p id="label_invoice_no" class="invoice-input"
                                                            style="text-align: right; font-weight: bold;">
                                                            Invoice Number:
                                                        </p>
                                                    </strong>
                                                </td>
                                                <td align="left" style="padding-left:20px">
                                                    <input formControlName="invoice_number" type="text" id="no"
                                                        class="invoice-input" style="text-align: right;">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right">
                                                    <strong>
                                                        <p class="invoice-input"
                                                            style="text-align: right; font-weight: bold;">
                                                            Date:
                                                        </p>
                                                    </strong>
                                                </td>
                                                <td align="left" style="padding-left:20px">
                                                    <input formControlName="date" style="width: 100%" type="date"
                                                        id="date" class="invoice-input" />
                                                </td>
                                            </tr>

                                            <tr class="field1_row">
                                                <td align="right">
                                                    <p type="text" class="invoice-input"
                                                        style="text-align: right; font-weight: bold;">
                                                        <b> Due Date: </b>
                                                    </p>
                                                </td>
                                                <td align="left" style="padding-left:20px;">
                                                    <input formControlName="due_date" style="width: 100%" type="date"
                                                        id="due-date" class="invoice-input" />
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <nz-select [nzMaxTagCount]="3" [nzMaxTagPlaceholder]="tagPlaceHolder" nzMode="multiple"
                    nzPlaceHolder="Please select">
                    <nz-option *ngFor="let item of invoiceItems" [nzLabel]="item.title" [nzValue]="item.id"></nz-option>
                </nz-select>
                <ng-template #tagPlaceHolder let-selectedList>and {{ selectedList.length }} more selected</ng-template>
                <div id="items-list">
                    <table class="table table-condensed table-bordered table-striped items-table">
                        <thead>
                            <tr>
                                <th style="width:50%">Item</th>
                                <th style="width:10%">Quantity</th>
                                <th style="width:15%">Unit Price</th>
                                <th style="width:15%">Amount</th>
                                <th style="width:10%" align="center">Action</th>
                            </tr>
                        </thead>
                        <tfoot id="TotalsSection">

                            <tr class="totals-row shaped">
                                <td class="wide-cell" colspan="2">
                                    <button nz-button type="button" nzSize="small" nzType="primary">
                                        <i class="fa fa-plus me-2"></i>
                                        Add item
                                    </button>
                                </td>
                                <td>
                                    <small><strong>Sub Total</strong></small>
                                </td>
                                <td colspan="2"><span id="total">৳125</span>
                                </td>
                            </tr>
                            <tr class="totals-row shaped">
                                <td class="wide-cell" colspan="2"></td>
                                <td><small><strong>Discount %</strong></small></td>
                                <td colspan="2">
                                    <input formControlName="discount" type="text" id="discount"
                                        class="invoice-input editable">
                                </td>
                            </tr>
                            <tr class="totals-row shaped">
                                <td class="wide-cell" colspan="2"></td>
                                <td><small><strong>Total</strong></small></td>
                                <td colspan="2">
                                    <input formControlName="total_amount" type="text" id="sub-total"
                                        class="invoice-input editable">
                                </td>
                            </tr>

                            <tr class="totals-row shaped">
                                <td class="wide-cell" colspan="2"></td>
                                <td><small><strong>Paid Amount</strong></small></td>
                                <td colspan="2">
                                    <input formControlName="paid_amount" type="text" id="paid-amount"
                                        class="invoice-input editable">
                                </td>
                            </tr>

                            <tr class="totals-row shaped">
                                <td class="wide-cell" colspan="2"></td>
                                <td><small><strong>Due Amount</strong></small></td>
                                <td colspan="2"><span id="unpaid">৳125</span></td>
                            </tr>
                        </tfoot>
                        <tbody id="ItemsTable">
                            <tr description="Routine Dental Checkup" qty="5" unit_price="25" discount="0" subtotal="125"
                                total="125" class="item-row">
                                <td>
                                    <input type="text" class="editable input-mini" value="Routine Dental Checkup" />
                                </td>
                                <td><input type="text" class="editable input-mini" value="5" /></td>
                                <td><input type="text" class="editable input-mini" value="25" /></td>
                                <td>৳125</td>
                                <td class="text-center">
                                    <button nz-button nzDanger nzSize="small" class="remove-item">
                                        <i class="fa fa-trash icon-white"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="notes-block">
                    <table border="0" width="100%">
                        <tbody>
                            <tr>
                                <td>
                                    <textarea formControlName="description" name="notes" nz-input rows="2"
                                        placeholder="Notes and Terms:"></textarea>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </mat-dialog-content>

    <mat-dialog-actions class="d-flex justify-content-between">
        <div>
            <button mat-raised-button class="me-2" color="primary">
                <span nz-icon nzType="file-pdf" class="me-2" nzTheme="outline"></span> Print
            </button>
        </div>
        <div>
            <button [mat-dialog-close]="true" class="me-2" mat-raised-button>
                Close
            </button>
            <button [disabled]="invoiceForm.invalid || isDisabled" color="primary" mat-raised-button>
                {{data? 'Update': 'Create'}}
            </button>
        </div>
    </mat-dialog-actions>
</form>